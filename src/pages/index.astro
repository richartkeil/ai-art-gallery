---
import Layout from "../layouts/Layout.astro";
import { getImage } from "@astrojs/image";

const creations: {
	id: string;
	image: astroHTML.JSX.ImgHTMLAttributes;
	description: string;
	source: string;
}[] = [];

const rawCreations = (await Astro.glob('../assets/creations/creations.json'))[0].default;
const imageFiles = await Astro.glob('../assets/creations/images/*.webp');
for (const creation of rawCreations.sort((a: any, b: any) => a.fetchedAt - b.fetchedAt)) {
	const image = imageFiles.find(f => f.default.src.includes(creation.filename));
	creations.push({
		id: creation.id,
		image: await getImage({ src: image!.default.src, format: 'webp', width: 512, height: 512 }),
		description: creation.description,
		source: creation.sourceUrl,
	});
}

---

<Layout title="AI Art Gallery">
	<header class="p-4 sm:p-12 text-center marker:text-gray-500 dark:text-slate-500">
		<h1 class="mb-6 text-4xl font-serif text-gray-800 dark:text-slate-200">An AI Art Gallery</h1>

		<p class="mb-6 m-auto w-full md:w-2/3">With the publication of <a class="underline"
				href="https://openai.com/dall-e-2/">DALL·E 2</a> it is for the
			first time possible to have an AI model create visually striking and diverse images which have never existed
			before. This opens up entirely new possibilities for artistic exploration and marks the beginning of an era
			where the concept of human creativity becomes questionable.
			This site is a curated collection of stimulating images generated by DALL·E 2, Midjourney and the like.</p>

		<div class="mb-6 dark:text-slate-200">—</div>

		<p class="m-auto w-full sm:w-96">„Creativity is seeing what others see and
			thinking what no one else ever thought.“ – A. Einstein
		</p>
	</header>
	<main>
		<div class="p-4 sm:p-5 md:p-6 flex flex-wrap">
			{creations.map(creation => (
			<div class="w-full p-4 sm:w-1/2 sm:p-5 md:w-1/5 md:p-6">
				<a href={creation.id}>
					<img src={creation.image.src}
						class="w-full rounded hover:shadow-2xl transition-all hover:scale-105" />
				</a>
			</div>
			))}
		</div>
	</main>
</Layout>